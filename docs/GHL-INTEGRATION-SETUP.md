# GoHighLevel Integration Setup Guide

## Complete Flow Overview

```
GHL Splash Page → Next.js Form → GHL API → Affiliate Created → Welcome Email Sent → Partner Dashboard
```

---

## Part 1: Update Your GHL Splash Page HTML

### Replace the CTA Links

In your GHL page builder, find these links and update them:

**Current (in your HTML):**
```html
<a href="#apply" class="btn btn-gold">Apply to Partner →</a>
<a href="#apply" class="nav-cta">Apply Now</a>
```

**Update to:**
```html
<a href="https://your-vercel-domain.vercel.app/#apply?source=ghl_splash&campaign=partner_program" class="btn btn-gold">Apply to Partner →</a>
<a href="https://your-vercel-domain.vercel.app/#apply?source=ghl_splash&campaign=partner_program" class="nav-cta">Apply Now</a>
```

### Tracking Parameters

Add these to track where signups come from:
- `source=ghl_splash` - Shows they came from your GHL page
- `campaign=partner_program` - Identifies which campaign
- `medium=funnel` - Optional: identify the marketing channel

**Example URLs:**
```
https://your-domain.com/#apply?source=ghl_splash&campaign=summer_2025
https://your-domain.com/#apply?source=facebook_ad&campaign=partner_launch&medium=paid
https://your-domain.com/#apply?source=email&campaign=newsletter_december
```

---

## Part 2: GHL Automation Setup

### Workflow 1: Partner Welcome Email

**Trigger:** Contact is tagged with "Send Welcome Email"

**Actions:**
1. **Wait** - 1 minute delay
2. **Send Email** - Use the template you created (with affiliate link)
3. **Add Tag** - "Welcome Email Sent"
4. **Remove Tag** - "Send Welcome Email"

**Email Template Variables:**
```
{{contact.first_name}}
{{contact.last_name}}
{{contact.email}}
{{contact.custom_values.affiliate_link}}
{{contact.custom_values.commission_rate}}
```

### Workflow 2: VP Application Notification

**Trigger:** Contact is tagged with "VP Application"

**Actions:**
1. **Send Internal Email** - To support@cookin.io
2. **Create Task** - "Review VP Application: {{contact.full_name}}"
3. **Add Tag** - "Awaiting VP Review"

---

## Part 3: Custom Fields Setup in GHL

Go to **Settings → Custom Fields** and create these:

| Field Name | Field Key | Type | Use |
|------------|-----------|------|-----|
| Application ID | `application_id` | Text | Database reference |
| Application Type | `application_type` | Dropdown | partner, vp |
| Commission Rate | `commission_rate` | Text | 15%, 25%, 35% |
| Affiliate Link | `affiliate_link` | URL | Their unique link |
| Tracking Source | `tracking_source` | Text | Where they came from |
| Tracking Campaign | `tracking_campaign` | Text | Campaign identifier |
| Instagram Handle | `instagram` | Text | Social media |
| Facebook Profile | `facebook` | URL | Social media |
| LinkedIn URL | `linkedin` | URL | Social media |
| Follower Count | `follower_count` | Dropdown | Range options |
| Portfolio URL | `portfolio` | URL | VP applicants |

---

## Part 4: Webhook Configuration

### Incoming Webhook

1. Go to **Settings → Webhooks**
2. Click **Add Webhook**
3. **Name:** Partner Signup Notifications
4. **URL:** `https://your-api-endpoint.com/api/ghl-webhook` (if needed)
5. **Secret:** `saintvision_webhook_2025`
6. **Events:** Select:
   - Contact Created
   - Contact Updated
   - Tag Applied

---

## Part 5: Affiliate Manager Setup

### Create Affiliate Campaign

1. Go to **Marketing → Affiliate Manager**
2. Click **Campaigns** tab
3. Create campaign: **"CookinPartners.com"**
4. **Funnel:** Select your splash page funnel
5. **Products:** Add all SaintSal products
6. **Commission:** Configure based on tier
   - Default: 15%
   - VP: 25% (manual adjustment)
   - President: 35% (manual adjustment)

### Configure Tracking

Your affiliate links will be:
```
https://cookinpartners.com/cookinpartnerscom?am_id={affiliate_id}
```

The `am_id` parameter is automatically generated by GHL when the affiliate is created.

---

## Part 6: Testing the Complete Flow

### Test Partner Signup (15%)

1. Go to your splash page
2. Click "Apply Now"
3. Fill out Partner form
4. Submit
5. **Verify:**
   - ✅ Contact created in GHL
   - ✅ Tagged with "Partner", "15% Commission", "Send Welcome Email"
   - ✅ Affiliate created in Affiliate Manager
   - ✅ Welcome email sent with affiliate link
   - ✅ Thank you page shows affiliate link

### Test VP Application (25%)

1. Go to your splash page
2. Click "Apply for VP"
3. Fill out full VP form with social media
4. Submit
5. **Verify:**
   - ✅ Contact created in GHL
   - ✅ Tagged with "VP Application", "Pending Review"
   - ✅ Email sent to support@cookin.io
   - ✅ Custom fields populated with social data
   - ✅ Task created for review

---

## Part 7: Client Portal Access

Your partners access training and resources at:
```
https://cookinpartners.com/portal
```

**Setup:**
1. Go to **Sites → Client Portal**
2. **Branding:** Already configured as "CookinPartners.com"
3. **Content:** Add training videos, documents, FAQs
4. **Access:** Partners login with their email

---

## Environment Variables Checklist

Make sure these are set in your Vercel project:

```bash
GHL_LOCATION_ID=oRA8vL3OSiCPjpwmEC0V
GHL_PRIVATE_TOKEN=pit-fd2d456a-1439-49a5-a9c7-d0524e4797ad
GHL_WEBHOOK_SECRET=saintvision_webhook_2025
NEXT_PUBLIC_GHL_TRACKING_ID=tk_536af3445cba47f7bccd6946e71526bc
```

---

## Troubleshooting

### Affiliate Links Not Generated
- Check GHL API token has "Affiliate Manager" permissions
- Verify locationId is correct
- Check console logs for API errors

### Welcome Email Not Sending
- Ensure workflow is active
- Check "Send Welcome Email" tag is applied
- Verify email template exists and is published

### Tracking Not Working
- Confirm tracking script is loaded (check Network tab)
- Verify URL parameters are being captured
- Check sessionStorage in browser dev tools

---

## What Happens Automatically

### For Partner (15%) Applications:
1. ✅ Contact created in GHL
2. ✅ Affiliate account created
3. ✅ Unique affiliate link generated
4. ✅ Welcome email sent with link
5. ✅ Dashboard access granted
6. ✅ Commission tracking starts

### For VP (25-35%) Applications:
1. ✅ Contact created in GHL
2. ✅ Application details captured
3. ✅ Email sent to support@cookin.io
4. ✅ Review task created
5. ⏳ Manual review by team
6. ⏳ Affiliate created after approval

---

## Next Steps

1. **Update GHL Splash Page** - Add tracking parameters to all CTAs
2. **Create Workflows** - Partner welcome & VP notification
3. **Add Custom Fields** - Application data storage
4. **Test Everything** - Run through both flows
5. **Launch** - Start driving traffic to splash page

Your complete partner program is now connected end-to-end!
